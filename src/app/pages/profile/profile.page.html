<section class="mx-auto flex w-full max-w-3xl flex-col gap-8">
  <header class="space-y-2">
    <p class="text-xs uppercase tracking-[0.3em] text-slate-400">Account</p>
    <h1 class="text-3xl font-semibold text-white">Profile settings</h1>
    <p class="text-sm text-slate-400">Review your details and update your name or username.</p>
  </header>

  <form
    class="rounded-2xl border border-slate-800 bg-slate-900/60 p-6 shadow-lg"
    [formGroup]="form"
    (ngSubmit)="submit()"
  >
    <div class="grid gap-6 md:grid-cols-2">
      <div class="space-y-2">
        <label class="text-sm font-medium text-slate-200" for="email">Email</label>
        <input
          id="email"
          type="email"
          formControlName="email"
          class="w-full rounded-lg border border-slate-800 bg-slate-950/70 px-3 py-2 text-sm text-slate-400"
          readonly
        />
        <p class="text-xs text-slate-500">Email cannot be changed.</p>
      </div>

      <div class="space-y-2">
        <label class="text-sm font-medium text-slate-200" for="role">Role</label>
        <input
          id="role"
          type="text"
          [value]="user()?.role || ''"
          class="w-full rounded-lg border border-slate-800 bg-slate-950/70 px-3 py-2 text-sm text-slate-400"
          readonly
        />
      </div>

      <div class="space-y-2">
        <label class="text-sm font-medium text-slate-200" for="name">Name</label>
        <input
          id="name"
          type="text"
          formControlName="name"
          class="w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 outline-none ring-0 transition focus:border-slate-400"
          placeholder="Your name"
        />
        @if (form.controls.name.touched && form.controls.name.invalid) {
          <p class="text-xs text-rose-300">Name is required.</p>
        }
      </div>

      <div class="space-y-2">
        <label class="text-sm font-medium text-slate-200" for="username">Username</label>
        <input
          id="username"
          type="text"
          formControlName="username"
          class="w-full rounded-lg border border-slate-700 bg-slate-950 px-3 py-2 text-sm text-slate-100 outline-none ring-0 transition focus:border-slate-400"
          placeholder="Your username"
        />
        @if (form.controls.username.touched && form.controls.username.invalid) {
          <p class="text-xs text-rose-300">Username is required.</p>
        }
      </div>
    </div>

    <div class="mt-6 space-y-4">
      @if (error()) {
        <div
          class="rounded-lg border border-rose-500/40 bg-rose-500/10 px-3 py-2 text-sm text-rose-200"
          aria-live="polite"
        >
          {{ error() }}
        </div>
      }
      @if (success()) {
        <div
          class="rounded-lg border border-emerald-500/40 bg-emerald-500/10 px-3 py-2 text-sm text-emerald-200"
          aria-live="polite"
        >
          Profile updated successfully.
        </div>
      }
      <button
        type="submit"
        [disabled]="saving()"
        class="flex w-full items-center justify-center rounded-lg bg-emerald-400 px-4 py-2 text-sm font-semibold text-slate-950 transition hover:bg-emerald-300 disabled:cursor-not-allowed disabled:opacity-60"
      >
        @if (saving()) {
          <span>Saving...</span>
        } @else {
          <span>Save changes</span>
        }
      </button>
    </div>
  </form>
</section>
